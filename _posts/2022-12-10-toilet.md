---
layout: post
title: Should I put the toilet seat down?
type: post
published: false
---

_co-written with [Aditya Deshmukh](https://ece.illinois.edu/about/directory/grad-students/ad11)_

It is generally considered courteous for men to put the toilet seat down after
they pee in a mixed-gender shared bathroom. Is this really optimal strategy,
though? What does optimal even mean?

Modeling the problem, we make a few assumptions: men always pee standing up, and need the
toilet seat up to do so. Women pee sitting down, and both men and women poop
sitting down, requiring the seat to be down in each of these scenarios. While a
myriad complicated strategies are possible, a few jump out:

- **Gentleman**: Always leave the seat down after you're done
- **Gentlewoman**: Always leave the seat _up_ after you're done
- **Lazy**: Leave the seat as you last used it

To gain an intuition for the problem at hand, we built a
[simple toilet simulator](/toilet-protocol)
that allows one to tweak some parameters and see how they affect
outcomes.

In a household with an equal number of men and women, the _gentleman_
strategy requires a number of **flips** (i.e. changing the position of the
toilet seat) roughly equal to the number of time the toilet is used (or a 1x
flip factor) — women never need to flip a seat, while men must first put the
seat up when they pee then put it back down once they're done. The _gentlewoman_
strategy does similarly, with the women doing most of the
flipping (flip factor ~1x again), though it results in a greater total number of
flips, since men must also do 2 flips every time they go poo. The _lazy_
strategy really shines in comparision, though. With a flip factor of 0.5x, it
only requires half the number of flips as the number of times the toilet gets
used. Half the flips are done by women and half by men.

Households with a higher proportion of men make the gentleman strategy perform
worse --- a 1.5x flip factor at 80/20 man/woman split; and the gentlewoman
strategy perform better --- 0.6x flip factor at 80/20. Once again _lazy_
outperforms, with a 0.4x flip factor.

So far, the result matches our intuition --- flipping the toilet seat after
using it in anticipation of future use would get "wasted" if the subsequent use
isn't what you were expecting it to be.

There could, however, be a less obvious more complicated strategy that beats
_lazy_. To figure this out, we model this problem as a **Markov Decision
Process**. The initial position of the seat, the person's gender, and whether
the person wants to pee or poop is encoded in the state. The choice of which
position to leave the seat in encoded as an _action_. The frequencies of men
and women going to pee or poop are encoded in the probability transition
matrices (probability of going to next state given current state and the action
chosen). The cost of visiting a state and taking an action is set as the number
times one has to flip the toilet seat. We consider an infinite-horizon MDP and
solve for the optimal stationary policies which minimize the total discounted
cost and the limiting average cost. In both cases, the optimal strategy turns out
to be the lazy strategy!

State space:
{% katex %}
\mathcal{S} = \{(M,P_1,U),(M,P_1,D),(M,P_2,U),(M,P_2,D),(W,P_1,U),(W,P_1,D),(W,P_2,U),(W,P_2,D)\}
{% endkatex %}

Action space:
{% katex %}
\mathcal{A} = \{U,D\}
{% endkatex %}

Probability transition matrix:
{% katex %}
\mathsf{P}
{% endkatex %}
